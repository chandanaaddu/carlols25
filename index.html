
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TLAG Carols Tracker ‚Äì 2025</title>
  <meta name="description" content="Live tracking for TLAG Christmas Carols with maps, verses, and statuses." />
  <link rel="preconnect" href="  <link rel="preconnect" href <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;700&family=Great+Vibes&displayle>
    :root{
      --bg: #0b1a22;
      --card: #102733;
      --accent: #e63946; --accent2: #2a9d8f; --gold: #ffd166;
      --text: #f1faee; --muted: #a8dadc;
      --live: #f94144; --upcoming: #06d6a0; --completed: #457b9d; --skipped: #6c757d;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:Montserrat,system-ui,sans-serif}
    .wrap{width:min(1100px,92%);margin:0 auto}
    .hero{
      background: radial-gradient(1200px 400px at 50% -60%, #174252, transparent 60%),
                  url('https://images.unsplash.com/photo-1482517967863-00e15c9b44be?q=80&w=2000&auto=format&fit=crop') center/cover no-repeat;
      padding:3.5rem 0 2rem; position:relative; border-bottom:3px solid rgba(255,255,255,.08);
    }
    .hero h1{font-family:"Great Vibes",cursive;font-size:clamp(2.4rem,6vw,3.8rem);margin:0 0 .25rem;color:var(--gold);text-shadow:0 2px 10px rgba(0,0,0,.4)}
    .subtitle{margin:.25rem 0 1rem;color:var(--muted)}
    .controls{display:flex;gap:.6rem;flex-wrap:wrap;margin:.6rem 0 1rem}
    .controls input,.controls .btn{padding:.7rem .85rem;background:rgba(0,0,0,.25);color:var(--text);
      border:1px solid rgba(255,255,255,.15);border-radius:.6rem;outline:none}
    .controls input::placeholder{color:#cbd5e1}
    .btn{cursor:pointer} .btn.ghost{background:transparent;border-color:rgba(255,255,255,.25)}
    .legend{display:flex;gap:.5rem;flex-wrap:wrap}
    .badge{display:inline-flex;align-items:center;gap:.4rem;padding:.28rem .55rem;border-radius:999px;font-size:.85rem;font-weight:700;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.18)}
    .badge.upcoming{color:var(--upcoming)} .badge.live{color:var(--live)} .badge.completed{color:var(--completed)} .badge.skipped{color:var(--skipped)}
    .cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1rem;margin:1.2rem 0 2.2rem}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.03)),var(--card);
      border:1px solid rgba(255,255,255,.12);border-radius:1rem;padding:1rem;position:relative;overflow:hidden;box-shadow:0 6px 16px rgba(0,0,0,.25)}
    .top{display:flex;align-items:flex-start;gap:.75rem}
    .tree{width:38px;height:38px;background:radial-gradient(circle at 50% 30%, #2ca58d, #2a9d8f);
      border-radius:8px;flex:0 0 auto;display:grid;place-items:center;color:#113a4a;font-weight:900;border:1px solid rgba(255,255,255,.2)}
    .title{display:flex;flex-direction:column;gap:.2rem}
    .title h3{margin:0;font-size:1.05rem;color:#f8fafc}
    .title .date{font-size:.85rem;color:var(--muted)}
    .kv{margin:.7rem 0;display:grid;gap:.35rem}
    .row{display:flex;gap:.5rem;align-items:flex-start}
    .label{width:92px;color:#cbd5e1;font-size:.85rem}
    .val{flex:1;color:#e2e8f0}
    .pills{display:flex;gap:.5rem;margin-top:.6rem;flex-wrap:wrap}
    .pill{padding:.28rem .55rem;border-radius:999px;font-size:.8rem;border:1px solid rgba(255,255,255,.15)}
    .status-upcoming{background:rgba(6,214,160,.12);color:var(--upcoming)}
    .status-live{background:rgba(249,65,68,.12);color:var(--live)}
    .status-completed{background:rgba(69,123,157,.12);color:var(--completed)}
    .status-skipped{background:rgba(108,117,125,.12);color:var(--skipped)}
    .actions{display:flex;gap:.5rem;margin-top:.8rem}
    .actions .btn{background:linear-gradient(180deg,rgba(255,255,255,.1),rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.18);border-radius:.6rem;padding:.55rem .7rem;font-weight:600}
    .btn.primary{background:linear-gradient(180deg,#e6394650,#e6394610);border-color:#e6394655;color:#fff}
    .btn.secondary{background:linear-gradient(180deg,#2a9d8f50,#2a9d8f10);border-color:#2a9d8f55;color:#fff}
    .btn.gold{background:linear-gradient(180deg,#ffd16666,#ffd16622);border-color:#ffd16688;color:#1b1b1b}
    .map{margin-top:.8rem;border:0;width:100%;height:210px;border-radius:.6rem;filter:saturate(1.1) contrast(1.02);border:1px solid rgba(255,255,255,.12)}
    .snow::before,.snow::after{content:"";position:fixed;inset:0;pointer-events:none;
      background-image:radial-gradient(2px 2px at 20px 30px, rgba(255,255,255,.9), rgba(255,255,255,0) 40%),
                       radial-gradient(3px 3px at 100px 80px, rgba(255,255,255,.8), rgba(255,255,255,0) 40%),
                       radial-gradient(1.5px 1.5px at 200px 150px, rgba(255,255,255,.9), rgba(255,255,255,0) 40%);
      animation:snow 10s linear infinite;opacity:.35}
    .snow::after{animation-duration:16s;opacity:.25}
    @keyframes snow{from{background-position:0 0,0 0,0 0}to{background-position:0 600px,0 800px,0 1000px}}
    .empty{text-align:center;color:#cbd5e1}
    .hidden{display:none}
    .footer{color:#a8dadc;border-top:1px solid rgba(255,255,255,.1);padding:1rem 0 2rem}
    .toolbar{display:flex;gap:.6rem;flex-wrap:wrap;margin-top:.6rem}
  </style>
  <!-- html2canvas for "Save as Image" -->
  <script defer src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvashead>
<body>
  <div class="snow"></div>
  <header class="hero">
    <div class="wrap">
      <h1>TLAG ‚Äì Carols 2025</h1>
      <p class="subtitle">‚ÄúGlory to God in the highest, and on earth peace‚Ä¶‚Äù ‚Äì Luke 2:14</p>
      <div class="controls">
        <input id="search" type="search" placeholder="Search family, address, verse..." />
        <input id="dateFilter" type="date" />
        <button id="clearFilters" class="btn ghost">Clear</button>
      </div>
      <div class="toolbar">
        <button id="saveFiltered" class="btn gold">Save filtered list as image</button>
      </div>
      <div class="legend">
        <span class="badge upcoming">Upcoming</span>
        <span class="badge live">Live</span>
        <span class="badge completed">Completed</span>
        <span class="badge skipped">Skipped</span>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section id="cards" class="cards"></section>
    <p id="emptyState" class="empty hidden">No matches found. Try clearing filters.</p>
  </main>

  <footer class="wrap footer">
    <p>Made with ‚ô• for Christmas ‚Äî TLAG Carols 2025</p>
    <p><small>Last updated: <span id="lastUpdated">‚Äî</span></small></p>
  </footer>

  <script>
    /* ====== Inline data: EDIT THIS BLOCK ======
       - date: YYYY-MM-DD (local)
       - start/end: HH:MM (24h)
       - status: "" or "skipped" to force skipped
       - verseText optional
    */
    const SCHEDULE = [
      { date:"2025-12-05", family:"Jasper Uncle", address:"1750 FM423, Frisco, TX 75033",
        start:"18:00", end:"18:20", verseRef:"Isaiah 9:6", verseText:"For unto us a child is born...", status:"" },
      { date:"2025-12-05", family:"Vinod", address:"1690 FM 423 #2209, Frisco, TX 75033",
        start:"18:30", end:"18:50", verseRef:"Luke 2:10‚Äì11", verseText:"", status:"" },
      { date:"2025-12-05", family:"Suresh", address:"1690 FM 423 #12203, Frisco, TX 75033",
        start:"19:00", end:"19:20", verseRef:"John 1:14", verseText:"", status:"" },
      { date:"2025-12-06", family:"Sam Vijay", address:"Apt 1201, 8626 Hickory St, Frisco, TX 75034",
        start:"10:00", end:"10:20", verseRef:"Titus 3:4-6", verseText:"", status:"" },
      { date:"2025-12-12", family:"Mary Buela", address:"1669 Willow Dr, Prosper, TX 75078",
        start:"18:00", end:"18:20", verseRef:"Romans 15:13", verseText:"", status:"skipped" },
      { date:"2025-12-13", family:"Vineel", address:"532 Sanhalie Dr, Frisco, TX 75033",
        start:"09:00", end:"09:20", verseRef:"Matthew 1:23", verseText:"", status:"" }
      // ‚¨ÜÔ∏è Add more entries here‚Ä¶
    ];

    /* ===== Helpers ===== */
    const $ = (s, r=document) => r.querySelector(s);
    const $$ = (s, r=document) => Array.from(r.querySelectorAll(s));
    const pad = n => String(n).padStart(2,"0");
    const fmt12 = hm => {
      if(!hm) return "";
      const [h,m] = hm.split(":").map(Number);
      const d = new Date(); d.setHours(h, m||0, 0, 0);
      return d.toLocaleTimeString([], {hour:"numeric", minute:"2-digit"});
    };
    const todayISO = () => { const d = new Date(); return `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())}`; };
    const slug = s => s.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]/g,"");

    function computeStatus(item, now=new Date()){
      if((item.status||"").toLowerCase()==="skipped") return "skipped";
      const start = new Date(`${item.date}T${item.start||"00:00"}:00`);
      const end   = new Date(`${item.date}T${item.end||"23:59"}:59`);
      if(now < start) return "upcoming";
      if(now >= start && now <= end) return "live";
      return "completed";
    }
    const mapsLink = address => `https://www.google.com/maps?q=${encodeURIComponent(address)}`;
    const mapsEmbed = address => `https://www.google.com/maps?q=${encodeURIComponent(address)}&output=embed`;

    /* ===== Render ===== */
    let DATA = [];

    function render(list){
      const cards = $("#cards");
      cards.innerHTML = "";
      if(!list.length){ $("#emptyState").classList.remove("hidden"); return; }
      $("#emptyState").classList.add("hidden");

      const byDate = list.reduce((acc,it)=>{ (acc[it.date] ||= []).push(it); return acc; }, {});
      const dates = Object.keys(byDate).sort();

      dates.forEach(date=>{
        byDate[date].sort((a,b)=> (a.start||"").localeCompare(b.start||""));
        byDate[date].forEach(item=>{
          const status = computeStatus(item);
          const id = `card-${slug(item.family)}-${item.date}`;
          const el = document.createElement("article");
          el.className="card"; el.id=id;
          el.innerHTML = `
            <div class="top">
              <div class="tree">üéÑ</div>
              <div class="title">
                <h3>${item.family}</h3>
                <div class="date">${new Date(item.date).toLocaleDateString([], {weekday:"short", month:"short", day:"numeric", year:"numeric"})}</div>
              </div>
            </div>

            <div class="kv">
              <div class="row"><div class="label">Time</div><div class="val">${fmt12(item.start)} ‚Äì ${fmt12(item.end)}</div></div>
              <div class="row"><div class="label">Address</div><div class="val">${item.address}</div></div>
              <div class="row"><div class="label">Verse</div><div class="val"><strong>${item.verseRef||""}</strong>${item.verseText?` ‚Äî ${item.verseText}`:""}</div></div>
            </div>

            <div class="pills">
              <span class="pill status-${status}">${status.toUpperCase()}</span>
            </div>

            <div class="actions">
              <a class="btn primary" href="${mapsLink(item.address           <button class="btn secondary" data-save="${id}">Save as Image</button>
            </div>

            <iframe class="map" loading="lazy" src        `;
          cards.appendChild(el);
        });
      });

      // per-card image save
      $$("button[data-save]").forEach(btn=>{
        btn.addEventListener("click", async ()=>{
          const id = btn.getAttribute("data-save");
          const node = document.getElementById(id);
          // hide iframe while capturing (iframes cannot be painted due to browser security)
          const map = node.querySelector(".map");
          map.style.visibility = "hidden";
          try{
            const canvas = await html2canvas(node, {backgroundColor:"#0b1a22", scale:2});
            const a = document.createElement("a");
            a.href = canvas.toDataURL("image/png");
            a.download = `${id}.png`;
            a.click();
          } finally {
            map.style.visibility = "visible";
          }
        });
      });
    }

    function applyFilters(){
      const q = ($("#search").value||"").toLowerCase().trim();
      const d = $("#dateFilter").value||"";
      const out = DATA.filter(it=>{
        const hitQ = !q || [it.family,it.address,it.verseRef,it.verseText].join(" ").toLowerCase().includes(q);
        const hitD = !d || it.date===d;
        return hitQ && hitD;
      });
      render(out);
    }

    function init(){
      // normalize
      DATA = SCHEDULE.map(x=>({
        ...x,
        date:x.date, start:x.start||"", end:x.end||"",
        family:x.family||"", address:x.address||"",
        verseRef:x.verseRef||"", verseText:x.verseText||"",
        status:(x.status||"").toLowerCase()
      }));

      const hasToday = DATA.some(d=>d.date===todayISO());
      if(hasToday) $("#dateFilter").value = todayISO();

      $("#lastUpdated").textContent = new Date().toLocaleString();

      render(DATA);
      $("#search").addEventListener("input", applyFilters);
      $("#dateFilter").addEventListener("change", applyFilters);
      $("#clearFilters").addEventListener("click", ()=>{ $("#search").value=""; $("#dateFilter").value=""; applyFilters(); });

      // Save filtered list as one image
      $("#saveFiltered").addEventListener("click", async ()=>{
        const container = $("#cards");
        // hide all iframes for capture
        const iframes = $$(".map", container);
        iframes.forEach(i=>i.style.visibility="hidden");
        try{
          const canvas = await html2canvas(container, {backgroundColor:"#0b1a22", scale:2});
          const a = document.createElement("a");
          a.href = canvas.toDataURL("image/png");
          a.download = `carols-${$("#dateFilter").value||"all"}.png`;
          a.click();
        } finally {
          iframes.forEach(i=>i.style.visibility="visible");
        }
      });
    }

    document.addEventListener("DOMContentLoaded", init);
  </script>
</body>
</html>
